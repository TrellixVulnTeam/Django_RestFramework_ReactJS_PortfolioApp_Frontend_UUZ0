{"ast":null,"code":"import _regeneratorRuntime from\"/home/alex/Documents/Auth_System/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/alex/Documents/Auth_System/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{LOGIN_SUCCESS,LOGIN_FAIL,USER_LOADED_SUCCESSS,USER_LOADED_FAIL}from'./types';export var load_user=function load_user(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem('access')){_context.next=14;break;}config={headers:{'Content-Type':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};_context.prev=2;_context.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/user/me/\"),config);case 5:response=_context.sent;dispatch({type:USER_LOADED_SUCCESSS,payload:response.data});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:USER_LOADED_FAIL});case 12:_context.next=15;break;case 14:dispatch({type:USER_LOADED_FAIL});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// export const login = (email, password) => async (dispatch) => {\n//     const config = {\n//         headers: {\n//             'Content-Type': 'application/json'\n//         }\n//     };\n//     const body = JSON.stringify({ email, password });\n//     console.log(\"body\", body)\n//     try {\n//         // `${process.env.REACT_APP_API_URL}/auth/jwt/create/`\n//         const res = await axios.post('http://127.0.0.1:8000/auth/jwt/create/', body, config);\n//         console.log(\"haygig\",res)\n//         dispatch({\n//             type: LOGIN_SUCCESS,\n//             payload: res.data\n//         });\n//         dispatch(load_user());\n//     } catch (err) {\n//         console.log(\"derdin ne\", err)\n//         dispatch({\n//             type: LOGIN_FAIL\n//         })\n//     }\n// };\nexport var login=function login(email,password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({email:email,password:password});_context2.prev=2;_context2.next=5;return axios.post('http://127.0.0.1:8000/auth/jwt/create/',body,config);case 5:res=_context2.sent;console.log(\"res\",res);dispatch({type:LOGIN_SUCCESS,payload:res.data});alert(\" has beeen done \");// dispatch({\n_context2.next=16;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);console.log(\"it  has not been submitted\");console.log(\"error\",_context2.t0);dispatch({type:LOGIN_FAIL});// dispatch({\ncase 16:case\"end\":return _context2.stop();}}},_callee2,null,[[2,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// export const login=(email, password)=> async dispatch=>{\n//     console.log(\"we are good to go backend sites\")\n//     const config={\n//         headers: {\n//             Accept: \"application/json\",\n//             'Content-Type':'application/json'\n//         }\n//     }\n//     const body=JSON.stringify({ email, password})\n//     try{\n//        const response= await  axios.post(`http://127.0.0.1:8000/auth/jwt/create/`, body, config)\n//        dispatch({\n//            type:LOGIN_SUCCESS,\n//            payload:response.data\n//        })\n//        dispatch(load_user())\n//     }\n//     catch(error){\n//         dispatch({\n//             type:LOGIN_FAIL\n//         })\n//     }\n// }","map":{"version":3,"sources":["/home/alex/Documents/Auth_System/frontend/src/actions/auth.js"],"names":["axios","LOGIN_SUCCESS","LOGIN_FAIL","USER_LOADED_SUCCESSS","USER_LOADED_FAIL","load_user","dispatch","localStorage","getItem","config","headers","get","process","env","REACT_APP_API_URL","response","type","payload","data","login","email","password","body","JSON","stringify","post","res","console","log","alert"],"mappings":"6TAAA,MAAQA,CAAAA,KAAR,KAAmB,OAAnB,CAGA,OACIC,aADJ,CAECC,UAFD,CAGEC,oBAHF,CAIAC,gBAJA,KAKO,SALP,CASA,MAAO,IAAMC,CAAAA,SAAS,CAAE,QAAXA,CAAAA,SAAW,kGAAK,iBAAOC,QAAP,0IACtBC,YAAY,CAACC,OAAb,CAAqB,QAArB,CADsB,0BAEfC,MAFe,CAER,CACTC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,8BAAuBH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAvB,CAFI,CADC,CAFQ,uCAWOR,CAAAA,KAAK,CAACW,GAAN,WAAaC,OAAO,CAACC,GAAR,CAAYC,iBAAzB,mBAA2DL,MAA3D,CAXP,QAWXM,QAXW,eAajBT,QAAQ,CAAC,CACLU,IAAI,CAACb,oBADA,CAELc,OAAO,CAACF,QAAQ,CAACG,IAFZ,CAAD,CAAR,CAbiB,+EAoBjBZ,QAAQ,CAAC,CACJU,IAAI,CAACZ,gBADD,CAAD,CAAR,CApBiB,uCA6BrBE,QAAQ,CAAC,CACLU,IAAI,CAACZ,gBADA,CAAD,CAAR,CA7BqB,oEAAL,gEAAjB,CAqCP;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,MAAO,IAAMe,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAQC,QAAR,kGAAqB,kBAAOf,QAAP,0IAChCG,MADgC,CACvB,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CADuB,CAOhCY,IAPgC,CAOzBC,IAAI,CAACC,SAAL,CAAe,CAAEJ,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAPyB,yCAalBrB,CAAAA,KAAK,CAACyB,IAAN,CAChB,wCADgB,CAEhBH,IAFgB,CAGhBb,MAHgB,CAbkB,QAa9BiB,GAb8B,gBAkBpCC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAkBF,GAAlB,EACApB,QAAQ,CAAC,CACPU,IAAI,CAAEf,aADC,CAEPgB,OAAO,CAAES,GAAG,CAACR,IAFN,CAAD,CAAR,CAIAW,KAAK,CAAC,kBAAD,CAAL,CAEA;AAzBoC,qFA2BlCF,OAAO,CAACC,GAAR,CAAY,4BAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,OAAZ,eACFtB,QAAQ,CAAC,CACPU,IAAI,CAAEd,UADC,CAAD,CAAR,CAIA;AAjCoC,uEAArB,kEAAd,CAqCP;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA","sourcesContent":["import  axios from 'axios';\n\n\nimport {\n    LOGIN_SUCCESS,\n LOGIN_FAIL,\n  USER_LOADED_SUCCESSS,\nUSER_LOADED_FAIL\n} from './types';\n\n\n\nexport const load_user= ()=> async (dispatch)=>{\n    if(localStorage.getItem('access')){\n        const config={\n            headers:{\n                'Content-Type':'application/json',\n                'Authorization':`JWT ${localStorage.getItem('access')}`,\n                \n            }\n        }\n\n        try{\n            const response = await  axios.get(`${process.env.REACT_APP_API_URL}/auth/user/me/`,config)\n     \n            dispatch({\n                type:USER_LOADED_SUCCESSS,\n                payload:response.data\n            })\n         }\n         catch(error){\n           \n            dispatch({\n                 type:USER_LOADED_FAIL\n                 \n             })\n     \n         }\n    }\n\n    else{\n        dispatch({\n            type:USER_LOADED_FAIL\n            \n        })\n    }\n\n}\n\n// export const login = (email, password) => async (dispatch) => {\n\n//     const config = {\n//         headers: {\n//             'Content-Type': 'application/json'\n//         }\n//     };\n\n//     const body = JSON.stringify({ email, password });\n//     console.log(\"body\", body)\n\n//     try {\n//         // `${process.env.REACT_APP_API_URL}/auth/jwt/create/`\n//         const res = await axios.post('http://127.0.0.1:8000/auth/jwt/create/', body, config);\n//         console.log(\"haygig\",res)\n\n//         dispatch({\n//             type: LOGIN_SUCCESS,\n//             payload: res.data\n//         });\n\n//         dispatch(load_user());\n//     } catch (err) {\n//         console.log(\"derdin ne\", err)\n//         dispatch({\n//             type: LOGIN_FAIL\n//         })\n//     }\n// };\n\n\nexport const login = (email, password) => async (dispatch) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n  \n    const body = JSON.stringify({ email, password });\n  \n    try {\n      // axios.defaults.headers = {\n      //   \"Content-Type\": \"application/json\",\n      // };\n      const res = await axios.post(\n        'http://127.0.0.1:8000/auth/jwt/create/',\n        body,\n        config\n      );\n      console.log(\"res\",res)\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: res.data,\n      });\n      alert(\" has beeen done \");\n  \n      // dispatch({\n    } catch (err) {\n        console.log(\"it  has not been submitted\");\n        console.log(\"error\", err);\n      dispatch({\n        type: LOGIN_FAIL,\n      });\n  \n      // dispatch({\n    }\n  };\n  \n// export const login=(email, password)=> async dispatch=>{\n//     console.log(\"we are good to go backend sites\")\n\n\n//     const config={\n//         headers: {\n//             Accept: \"application/json\",\n//             'Content-Type':'application/json'\n//         }\n//     }\n\n//     const body=JSON.stringify({ email, password})\n\n\n//     try{\n//        const response= await  axios.post(`http://127.0.0.1:8000/auth/jwt/create/`, body, config)\n\n//        dispatch({\n//            type:LOGIN_SUCCESS,\n//            payload:response.data\n//        })\n//        dispatch(load_user())\n//     }\n//     catch(error){\n      \n//         dispatch({\n//             type:LOGIN_FAIL\n            \n//         })\n\n//     }\n// }"]},"metadata":{},"sourceType":"module"}