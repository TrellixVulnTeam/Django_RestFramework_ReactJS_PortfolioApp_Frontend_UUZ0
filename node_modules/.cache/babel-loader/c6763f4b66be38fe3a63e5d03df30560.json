{"ast":null,"code":"import _regeneratorRuntime from\"/home/alex/Documents/Auth_System/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/alex/Documents/Auth_System/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{LOGIN_SUCCESS,LOGIN_FAIL,USER_LOADED_SUCCESSS,USER_LOADED_FAIL}from'./types';export var load_user=function load_user(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem('access')){_context.next=14;break;}config={headers:{'Content-Type':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access')),'Accept':'application/json'}};_context.prev=2;_context.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/user/me/\"),config);case 5:response=_context.sent;dispatch({type:USER_LOADED_SUCCESSS,payload:response.data});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:USER_LOADED_FAIL});case 12:_context.next=15;break;case 14:dispatch({type:USER_LOADED_FAIL});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var login=function login(email,password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"we are good to go backend sites\");config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email,password:password});_context2.prev=3;_context2.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/create/\"),body,config);case 6:response=_context2.sent;dispatch({type:LOGIN_SUCCESS,payload:response.data});dispatch(load_user());_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);dispatch({type:LOGIN_FAIL});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/alex/Documents/Auth_System/frontend/src/actions/auth.js"],"names":["axios","LOGIN_SUCCESS","LOGIN_FAIL","USER_LOADED_SUCCESSS","USER_LOADED_FAIL","load_user","dispatch","localStorage","getItem","config","headers","get","process","env","REACT_APP_API_URL","response","type","payload","data","login","email","password","console","log","body","JSON","stringify","post"],"mappings":"6TAAA,MAAQA,CAAAA,KAAR,KAAmB,OAAnB,CAGA,OACIC,aADJ,CAECC,UAFD,CAGEC,oBAHF,CAIAC,gBAJA,KAKO,SALP,CASA,MAAO,IAAMC,CAAAA,SAAS,CAAE,QAAXA,CAAAA,SAAW,kGAAK,iBAAMC,QAAN,0IACtBC,YAAY,CAACC,OAAb,CAAqB,QAArB,CADsB,0BAEfC,MAFe,CAER,CACTC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,8BAAuBH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAvB,CAFI,CAGJ,SAAS,kBAHL,CADC,CAFQ,uCAWOR,CAAAA,KAAK,CAACW,GAAN,WAAaC,OAAO,CAACC,GAAR,CAAYC,iBAAzB,mBAA2DL,MAA3D,CAXP,QAWXM,QAXW,eAajBT,QAAQ,CAAC,CACLU,IAAI,CAACb,oBADA,CAELc,OAAO,CAACF,QAAQ,CAACG,IAFZ,CAAD,CAAR,CAbiB,+EAoBhBZ,QAAQ,CAAC,CACLU,IAAI,CAACZ,gBADA,CAAD,CAAR,CApBgB,uCA6BrBE,QAAQ,CAAC,CACLU,IAAI,CAACZ,gBADA,CAAD,CAAR,CA7BqB,oEAAL,gEAAjB,CAoCP,MAAO,IAAMe,CAAAA,KAAK,CAAC,QAANA,CAAAA,KAAM,CAACC,KAAD,CAAQC,QAAR,kGAAoB,kBAAMf,QAAN,+IACnCgB,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAGMd,MAJ6B,CAItB,CACTC,OAAO,CAAE,CACL,eAAe,kBADV,CADA,CAJsB,CAU7Bc,IAV6B,CAUxBC,IAAI,CAACC,SAAL,CAAe,CAAEN,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAVwB,yCAcTrB,CAAAA,KAAK,CAAC2B,IAAN,WAAcf,OAAO,CAACC,GAAR,CAAYC,iBAA1B,sBAAgEU,IAAhE,CAAsEf,MAAtE,CAdS,QAc1BM,QAd0B,gBAgBhCT,QAAQ,CAAC,CACLU,IAAI,CAACf,aADA,CAELgB,OAAO,CAACF,QAAQ,CAACG,IAFZ,CAAD,CAAR,CAIAZ,QAAQ,CAACD,SAAS,EAAV,CAAR,CApBgC,qFAwB/BC,QAAQ,CAAC,CACLU,IAAI,CAACd,UADA,CAAD,CAAR,CAxB+B,uEAApB,kEAAZ","sourcesContent":["import  axios from 'axios';\n\n\nimport {\n    LOGIN_SUCCESS,\n LOGIN_FAIL,\n  USER_LOADED_SUCCESSS,\nUSER_LOADED_FAIL\n} from './types';\n\n\n\nexport const load_user= ()=> async dispatch=>{\n    if(localStorage.getItem('access')){\n        const config={\n            headers:{\n                'Content-Type':'application/json',\n                'Authorization':`JWT ${localStorage.getItem('access')}`,\n                'Accept':'application/json'\n            }\n        }\n\n        try{\n            const response = await  axios.get(`${process.env.REACT_APP_API_URL}/auth/user/me/`,config)\n     \n            dispatch({\n                type:USER_LOADED_SUCCESSS,\n                payload:response.data\n            })\n         }\n         catch(error){\n           \n             dispatch({\n                 type:USER_LOADED_FAIL,\n                 \n             })\n     \n         }\n    }\n\n    else{\n        dispatch({\n            type:USER_LOADED_FAIL,\n            \n        })\n    }\n\n}\nexport const login=(email, password)=> async dispatch=>{\n    console.log(\"we are good to go backend sites\")\n\n\n    const config={\n        headers: {\n            'Content-Type':'application/json'\n        }\n    }\n\n    const body=JSON.stringify({ email, password})\n\n\n    try{\n       const response= await  axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/create/`, body, config)\n\n       dispatch({\n           type:LOGIN_SUCCESS,\n           payload:response.data\n       })\n       dispatch(load_user())\n    }\n    catch(error){\n      \n        dispatch({\n            type:LOGIN_FAIL,\n            \n        })\n\n    }\n}"]},"metadata":{},"sourceType":"module"}